<div *ngIf="isOpen" class="fixed inset-0 bg-black/50 flex items-center justify-center z-100 p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
    <div class="p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold text-gray-900">
          {{ training ? 'Редактировать тренировку' : 'Новая тренировка' }}
        </h2>
        <button (click)="onClose()" class="p-2 text-gray-400 hover:text-gray-600 transition-colors">
          <lucide-icon name="x" [size]="20"></lucide-icon>
        </button>
      </div>

      <form (ngSubmit)="onSubmit()" class="space-y-4">
        <!-- Name -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Название
          </label>
          <input type="text" [(ngModel)]="formData.name" name="name"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required />
        </div>

        <!-- Time -->
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              <lucide-icon name="clock" [size]="16" class="inline mr-1"></lucide-icon>
              Начало
            </label>
            <input type="time" [(ngModel)]="formData.startTime" name="startTime"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              <lucide-icon name="clock" [size]="16" class="inline mr-1"></lucide-icon>
              Окончание
            </label>
            <input type="time" [(ngModel)]="formData.endTime" name="endTime"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required />
          </div>
        </div>

        <!-- Service and Sport Type -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Услуга
          </label>
          <select [(ngModel)]="formData.service" name="service"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required>
            <option value="">Выберите услугу</option>
            <option *ngFor="let service of services" [value]="service">{{ service }}</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Вид спорта
          </label>
          <select [(ngModel)]="formData.sportType" name="sportType"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required>
            <option value="">Выберите вид спорта</option>
            <option *ngFor="let type of sportTypes" [value]="type">{{ type }}</option>
          </select>
        </div>

        <!-- Trainer -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            <lucide-icon name="user" [size]="16" class="inline mr-1"></lucide-icon>
            Тренер
          </label>
          <select [(ngModel)]="formData.trainer" name="trainer"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="">Выберите тренера</option>
            <option *ngFor="let trainer of trainers" [value]="trainer">{{ trainer }}</option>
          </select>
        </div>

        <!-- Location -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            <lucide-icon name="map-pin" [size]="16" class="inline mr-1"></lucide-icon>
            Место проведения
          </label>
          <select [(ngModel)]="formData.location" name="location"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="">Выберите место</option>
            <option *ngFor="let location of locations" [value]="location">{{ location }}</option>
          </select>
        </div>

        <!-- Capacity -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            <lucide-icon name="users" [size]="16" class="inline mr-1"></lucide-icon>
            Максимальная вместимость
          </label>
          <input type="number" min="1" [(ngModel)]="formData.maxCapacity" name="maxCapacity"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required />
        </div>

        <!-- Action buttons -->
        <div class="flex gap-3 pt-4">
          <button type="button" (click)="onClose()"
            class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">
            Отмена
          </button>
          <button type="submit"
            class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
            Сохранить
          </button>
        </div>
      </form>
    </div>
  </div>
</div>