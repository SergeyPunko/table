<div class="cursor-pointer transition-all duration-200 hover:scale-[1.02] h-full" [class.grayscale]="hasStarted"
  (click)="onViewClients()">
  <div *ngIf="durationInMinutes <= 15"
    class="h-full shadow-md rounded-md p-2 text-white text-xs flex flex-row items-center"
    [style.background-color]="colors.header">
    <div class="flex justify-between items-center flex-col">
      <div class="opacity-90">{{ training.startTime }}</div>
      <div class="opacity-90">{{ training.endTime }}</div>
    </div>
    <div class="font-medium truncate flex-1 text-center" [title]="training.name">{{ training.name }}</div>
    <div class="flex items-center flex-col justify-center leading-[8px]">
      <span>{{ training.currentOccupancy }}</span>
      <span> — </span>
      <span>{{ training.maxCapacity }}</span>
    </div>
  </div>

  <div *ngIf="durationInMinutes > 15 && durationInMinutes <= 30"
    class="h-full rounded-md text-white text-xs flex flex-col items-center shadow-md overflow-hidden"
    [style.background-color]="colors.header">
    <div class="px-2 py-1 flex items-center justify-between text-white">
      <h3 class="font-medium text-xs truncate pr-1" [title]="training.name">{{ training.name }}</h3>
    </div>

    <div class="flex items-center gap-1 w-full flex-1 flex-wrap justify-between"
      [style.background-color]="colors.background">
      <div class="px-2 pb-1">
        <div class="inline-block px-1.5 py-0.5 rounded text-xs font-medium" [style.color]="colors.text"
          [style.background-color]="colors.timeBackground">
          {{ training.startTime }}-{{ training.endTime }}
        </div>
      </div>

      <!-- Occupancy badge -->
      <div class="px-2 pb-1">
        <div class="flex items-center gap-1">
          <span class="inline-block px-1.5 py-0.5 rounded text-xs font-medium text-white"
            [style.background-color]="getOccupancyBgColor()">
            {{ training.currentOccupancy }} из {{ training.maxCapacity }}
          </span>
        </div>
      </div>
    </div>

  </div>

  <!-- 60+ minutes content -->
  <div *ngIf="durationInMinutes > 30" class="h-full flex flex-col rounded-md overflow-hidden shadow-md duration-200"
    [style.background-color]="colors.header">
    <!-- Header -->
    <div class="px-2 py-1 flex items-center justify-between text-white">
      <h3 class="font-medium text-xs truncate pr-1" [title]="training.name">{{ training.name }}</h3>
      <button *ngIf="!hasStarted" (click)="onEdit($event)"
        class="group p-0.5 hover:bg-white hover:bg-opacity-20 rounded transition-colors flex-shrink-0 cursor-pointer">
        <lucide-icon name="edit-3" [size]="16"
          class="text-white group-hover:text-gray-400 transition-colors"></lucide-icon>
      </button>
    </div>

    <div class="flex flex-col flex-1 py-2" [style.background-color]="colors.background" [style.color]="colors.text">
      <div class="flex gap-1 w-full flex-1 flex-wrap justify-between items-start">
        <div class="px-2 pb-1">
          <div class="inline-block px-1.5 py-0.5 rounded text-xs font-medium"
            [style.background-color]=" colors.timeBackground">
            {{ training.startTime }}-{{ training.endTime }}
          </div>
        </div>

        <!-- Occupancy badge -->
        <div class="px-2 pb-1">
          <div class="flex items-center gap-1">
            <span class="inline-block px-1.5 py-0.5 rounded text-xs font-medium text-white"
              [style.background-color]="getOccupancyBgColor()">
              {{ training.currentOccupancy }} из {{ training.maxCapacity }}
            </span>
          </div>
        </div>
      </div>

      <!-- Trainer info for longer sessions -->
      <div *ngIf="training.trainer" class="px-2 pb-1">
        <div class="text-xs opacity-90">
          {{ training.trainer }}
        </div>
      </div>

      <!-- Location info for 90+ min sessions -->
      <div *ngIf="durationInMinutes >= 90 && training.location" class="px-2 pb-1">
        <div class="text-xs opacity-80">
          {{ training.location }}
        </div>
      </div>
    </div>
  </div>
</div>